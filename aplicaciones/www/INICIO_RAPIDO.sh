#!/usr/bin/env bash

# ๐ฏ INICIO RรPIDO - Cache Dinรกmico

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# โ ANTES: Necesitabas hacer esto                               โ
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# 
# $ cd aplicaciones/www
# $ yarn prebuild        โ โณ Esperar a que genere cache
# $ yarn dev             โ Iniciar servidor
# 
# Si hacรญas cambios en WordPress:
# $ yarn prebuild        โ โณ Volver a generar cache
# $ # Recargar pรกgina

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# โ AHORA: Solo haz esto                                        โ
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

cd aplicaciones/www
yarn dev

# โจ ยกEso es todo!
# - Los datos vienen de la API en tiempo real
# - Los cambios en WordPress se ven inmediatamente
# - Solo recarga la pรกgina (F5)

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# โ OPCIONES ADICIONALES                                        โ
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

# Si quieres usar cache local (mรกs rรกpido, necesita internet una sola vez):
# $ yarn prebuild && yarn dev

# Si quieres forzar API directamente:
# $ yarn dev:api

# Si quieres forzar cache local:
# $ yarn dev:cache

# Para build (producciรณn):
# $ yarn build        โ Hace prebuild automรกticamente

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# โ ยฟQUร CAMBIร EN EL CรDIGO?                                   โ
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

# Las funciones de cache ahora son async:
# 
# ANTES:
#   const personajes = obtenerPersonajes();
#
# AHORA:
#   const personajes = await obtenerPersonajes();
#
# Esto estรก aplicado en todos los archivos .astro

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# โ ยฟCรMO FUNCIONA?                                             โ
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

# En desarrollo: NODE_ENV = 'development'
#   โ Obtiene datos de la API en tiempo real
#   โ Cache en memoria durante la sesiรณn
#
# En producciรณn: NODE_ENV = 'production'
#   โ Lee archivos JSON del cache
#   โ Cero llamadas a la API
#   โ Sitio super rรกpido

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# โ ARCHIVOS NUEVOS                                             โ
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

# - fuente/utilidades/cache-dinamico.ts
#   Lรณgica que detecta desarrollo vs producciรณn
#
# - DESARROLLO.md
#   Documentaciรณn completa
#
# - GUIA_RAPIDA.md
#   Resumen visual

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# โ BENEFICIOS                                                  โ
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

# โ Desarrollo sin fricciรณn
# โ Datos frescos de WordPress al instante
# โ Sin pasos extra (no esperar prefetch)
# โ Compatible con arquitectura actual
# โ Producciรณn igual de rรกpida

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# โ ยกYA ESTร LISTO!                                             โ
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

# Solo escribe:
# $ cd aplicaciones/www && yarn dev
#
# ยกY a desarrollar! ๐
